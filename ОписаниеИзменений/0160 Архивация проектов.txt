Документ «игсВводПлановойВыручкиИСебестоимости»

Форма документа:
Процедура  ПлановыеПоказателиСкважинаОбработкаВыбора - проверка переменной "игсПроектЗакрытПризнак". Если она истина, то выводит сообщение пользователю
Добавлена новая функция: ПолучитьСостояниеПроекта - получает ссылку на номенклатурную группу, проверяет все родительские группы на "игсПроектЗакрыт"

Документ «ПоступлениеТоваровУслуг» и 
ФорммаДокументаОбщая:
Изменена процедура "игсНастроитьФорму" - установлены действия событиям
Изменена процедура: Субконто1ПриИзменении - добавлено условие на проверку типа поля, если оно "Номенклатурная группа", тогда вызывается функция игсПроектЗакрытСервер, которая получает субконто 1 и возвращает значение булево. Если оно истина тогда возникает ошибка, в обратном случае идет стандартная обработка
Изменены процедуры: игсУслугиСубконтоПриИзменении и игсСубподрядныеРаботыСубконтоПриИзменении - добавлено условие на проверку типа поля, если оно "Номенклатурная группа", тогда вызывается функция игсПроектЗакрытСервер, которая получает субконто 1 и возвращает значение булево. Если оно истина тогда возникает ошибка, в обратном случае идет стандартная обработка
Добавлена новая функция: ПолучитьСостояниеПроекта - получает ссылку на номенклатурную группу, проверяет все родительские группы на "игсПроектЗакрыт"

Общая форма: РедактированиеСчетаЗатрат
Изменена процедура: Субконто1ПриИзменении - добавлено условие на проверку типа поля, если оно "Номенклатурная группа", тогда вызывается функция игсПроектЗакрытСервер, которая получает субконто 1 и возвращает значение булево. Если оно истина тогда возникает ошибка, в обратном случае идет стандартная обработка
Добавлена новая функция: игсПроектЗакрытСервер - получает ссылку на номенклатурную группу, проверяет все родительские группы на "игсПроектЗакрыт". Если такая запись найдена, то возвращает Истина, иначе Ложь  

Документ «ИмпРеализацияСтроительныхРаботУслуг»
Изменены процедуры: игсУслугиСубконтоПриИзменении и игсСубподрядныеРаботыСубконтоПриИзменении - добавлено условие на проверку типа поля, если оно "Номенклатурная группа", тогда вызывается функция игсПроектЗакрытСервер, которая получает субконто 1 и возвращает значение булево. Если оно истина тогда возникает ошибка, в обратном случае идет стандартная обработка
Добавлена новая функция: ПолучитьСостояниеПроекта - получает ссылку на номенклатурную группу, проверяет все родительские группы на "игсПроектЗакрыт"
Изменена процедура игсДоступностьЭлементовФормы - исправление ошибки по малооценке
Изменена процедура "игсНастроитьФорму" - установлены действия событиям

Справочник «НоменклатурныеГруппы»

МодульМенеджера:
Добавлены следующие функции:
- игсПроектЗакрыт - проверяет все родительские элементы полученной номенклатурной группы по реквизиту "игсПроектЗакрыт"
- игсОтсутствуютПодгруппы - проверяет, если у полученной группы, подчиненные группы
- игсЭтоГруппа - проверяет, является ли полученный элемент номенклатурной группой

ФормаСписка: установилен параметр для динамического списка, который выводит только те записи о которых значение "игсАрхив" = ЛОЖЬ
Добавлена область: игсДоработки
Добавлены процедуры: 
- игсНастроитьФорму - нужна для добавления реквизита и поля формы
- игсПриИзмененииигсАрхивВСписке - была создана для вызова функции ПриИзмененииигсАрхивВСпискеНаСервере
- ПриИзмененииигсАрхивВСпискеНаСервере - нужна для проверки признака "игсархивВСписке". Если она включена, то отбор очищается, в обратном случае включает отбор
- игсНастроитьОтбор - включает отбор по записям по признаку "игсАрхив"
Изменена процедура "приСозданииНаСервере" - добавлен вызов процедур "игсНастроитьФорму" и "игсНастроитьОтбор"
 
ФормаВыбора

Добавлена область: игсДоработки
Добавлены процедуры: 
- игсНастроитьФорму - нужна для добавления реквизита и поля формы
- игсПриИзмененииигсАрхивВСписке - была создана для вызова функции ПриИзмененииигсАрхивВСпискеНаСервере
- ПриИзмененииигсАрхивВСпискеНаСервере - нужна для проверки признака "игсархивВСписке". Если она включена, то отбор очищается, в обратном случае включает отбор
- игсНастроитьОтбор - включает отбор по записям по признаку "игсАрхив"

ФормаГруппы

Добавлена новая область "игсДоработки"
Добавлена новая процедура "игсНастроитьФорму" - добавляет на форму реквизиты: игсЗаказчик, игсДоговор, игсПроектЗакрыт
Изменена приСозданииНаСервере - добавлен вызов процедуры "игсНастроитьФорму"